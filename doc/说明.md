### 配置说明

1. application.properties中`file.dir`是kkfile的文件目录。kkfile在预览`file:///xxx`以及`ftp://xxx`时，会将其拷贝或下载到这个目录中。
2. application-local.properties中`nas.dir`是服务器的文件目录，通过fileId访问内部文件就访问的是此目录下文件。

### 踩坑

1. 前端控制器中添加方法时，需要在`FilterConfiguration`中添加过滤器路径，如果添加的方法请求为`@PathVariable`，`BaseUrlFilter`中方法会根据请求截断访问地址，前端再使用这个路径加载资源，就会访问不到资源。
2. 编写前端页面时，ftl中使用`${object}`，控制器方法中的model必须添加object，否则抛异常渲染失败。
3. 部署后预览`file:///`或`ftp://`图片失败，由于`FileHandlerSerivce`中的`fileDir`取值为`ConfigConstants`的`FILE_DIR`，`FILE_DIR`会先使用静态方法定义，再使用`@Value`赋值。因此加载顺序导致了该属性不正确，所以在`FileHandlerService`加上`@DependsOn("configConstants")`就能正确赋值。
4. 打包后startup.sh或startup.bat中启动命令的jar包的名称不正确，且指定其他配置文件时需要指定两个(不配置也行)，不然会报错未配置数据源。
   <br/>startup.sh:`-Dspring.config.location=../config/application.properties,../config/application-local.properties`
   <br/>startup.bat:`-Dspring.config.location=..\config\application.properties,..\config\application-local.properties`